"""
pip._vendor is for vendoring dependencies of pip to prevent needing pip to
depend on something external.

Files inside of pip._vendor should be considered immutable and should only be
updated to versions from upstream.
"""

from __future__ import absolute_import

import glob
import os.path
import sys

DEBUNDLED = False

WHEEL_DIR = os.path.abspath(os.path.dirname(__file__))

def vendored(modulename):
    vendored_name = "{0}.{1}".format(__name__, modulename)

    try:
        __import__(modulename, globals(), locals(), level=0)
    except ImportError:
        pass
    else:
        sys.modules[vendored_name] = sys.modules[modulename]
        base, head = vendored_name.rsplit(".", 1)
        setattr(sys.modules[base], head, sys.modules[modulename])

if DEBUNDLED:
    sys.path[:] = glob.glob(os.path.join(WHEEL_DIR, "*.whl")) + sys.path

    vendored_modules = [
        "cachecontrol", "certifi", "colorama", "distlib", "distro", "six",
        "six.moves", "six.moves.urllib", "six.moves.urllib.parse", "packaging",
        "packaging.version", "packaging.specifiers", "pep517", "pkg_resources",
        "platformdirs", "progress", "requests", "requests.exceptions",
        "requests.packages", "requests.packages.urllib3",
        "requests.packages.urllib3._collections", "requests.packages.urllib3.connection",
        "requests.packages.urllib3.connectionpool", "requests.packages.urllib3.contrib",
        "requests.packages.urllib3.contrib.ntlmpool", "requests.packages.urllib3.contrib.pyopenssl",
        "requests.packages.urllib3.exceptions", "requests.packages.urllib3.fields",
        "requests.packages.urllib3.filepost", "requests.packages.urllib3.packages",
        "requests.packages.urllib3.packages.ordered_dict", "requests.packages.urllib3.packages.six",
        "requests.packages.urllib3.packages.ssl_match_hostname",
        "requests.packages.urllib3.packages.ssl_match_hostname._implementation",
        "requests.packages.urllib3.poolmanager", "requests.packages.urllib3.request",
        "requests.packages.urllib3.response", "requests.packages.urllib3.util",
        "requests.packages.urllib3.util.connection", "requests.packages.urllib3.util.request",
        "requests.packages.urllib3.util.response", "requests.packages.urllib3.util.retry",
        "requests.packages.urllib3.util.ssl_", "requests.packages.urllib3.util.timeout",
        "requests.packages.urllib3.util.url", "resolvelib", "rich", "rich.console",
        "rich.highlighter", "rich.logging", "rich.markup", "rich.progress", "rich.segment",
        "rich.style", "rich.text", "rich.traceback", "tenacity", "tomli", "truststore", "urllib3"
    ]

    for module in vendored_modules:
        vendored(module)
