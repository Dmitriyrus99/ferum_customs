Подготовительные и сквозные задачи (выполняются на протяжении всего проекта)
☐ Настройка среды и CI/CD

☑ Настроить репозиторий в GitHub со стратегией ветвления (feature branching).

☑ Настроить GitHub Actions для непрерывной интеграции (CI): запуск тестов, линтинг кода, сборка артефактов.

☑ Настроить непрерывное развертывание (CD) на тестовый и рабочий серверы.

☑ Управлять конфигурацией и секретами через переменные окружения.

☐ Безопасность и доступ

☑ Реализовать аутентификацию на основе JWT с обязательной двухфакторной аутентификацией (2FA).


☑ Настроить контроль доступа на основе ролей (RBAC) для всех API и сущностей.


☑ Использовать TLS/HTTPS для всего внешнего трафика через Nginx.


☑ Внедрить ограничение скорости запросов (Rate Limiting) к API.


☑ Обеспечить шифрование конфиденциальных данных (контакты, email) в базе данных.


☐ Мониторинг и логирование

☑ Интегрировать Sentry для отслеживания ошибок в реальном времени.


☑ Настроить экспорт метрик в Prometheus для мониторинга производительности.


☑ Внедрить структурированное логирование всех ключевых действий пользователей и системных событий.


☐ Резервное копирование

☑ Настроить ежедневное автоматическое резервное копирование базы данных.

*   Для этого необходимо добавить скрипт `scripts/backup.sh` в `crontab` на хост-машине. Пример: `0 0 * * * /home/user/ferum_customs/scripts/backup.sh`


☑ Настроить выгрузку резервных копий в безопасное удаленное хранилище (Google Drive).

*   Для этого необходимо настроить `rclone` в контейнере `frappe`. Это можно сделать, выполнив `docker-compose exec frappe rclone config`.

☑ Разработать и задокументировать план аварийного восстановления.

Этап 1: CRM – Клиенты, Заявки и Проекты 

☐ Настройка базовых сущностей (DocTypes) в ERPNext:

☑ Создать кастомный DocType ServiceProject (Проект обслуживания) с необходимыми полями (название, даты, клиент, стоимость и т.д.).


☑ Создать DocType 

ServiceObject (Объект обслуживания) для учета сайтов или оборудования клиента.


☑ Создать дочерний DocType 

ProjectObjectItem для реализации связи «многие ко многим» между проектами и объектами обслуживания.


☑ Создать основной DocType 

ServiceRequest (Заявка на обслуживание) со всеми полями: тип, статус, срочность, привязка к проекту и объекту.


☐ Реализация бизнес-логики (ERPNext):

☑ Добавить хук валидации в 

ServiceProject для предотвращения дублирования объектов обслуживания в одном проекте.

☑ Добавить хук 

on_trash в ServiceObject, запрещающий удаление объекта при наличии активных заявок.


☑ Настроить автоматическое заполнение полей "Проект" и "Клиент" в 

ServiceRequest при выборе объекта обслуживания.

☑ Настроить систему уведомлений (Email и Telegram) о создании новых заявок, особенно со статусом "Срочно".

☐ Разработка пользовательского интерфейса (UI):

☑ Создать и настроить экранные формы в ERPNext для управления проектами (

ServiceProject) и объектами (ServiceObject).

☑ Разработать кастомизированную форму для 

ServiceRequest.

☑ Настроить Kanban-доску или списочное представление для отслеживания заявок по статусам.

☐ Интеграции:

☑ Реализовать базовую функциональность Telegram-бота для создания заявок командой 

/new_request.


Этап 2: Выполнение работ и контроль 

☐ Настройка сущностей для отчётности:

☑ Создать DocType 

ServiceReport (Отчет о выполненных работах).


☑ Создать дочернюю таблицу 

ServiceReportWorkItem для детализации выполненных работ (описание, количество, стоимость).


☑ Создать единый DocType 

CustomAttachment для всех вложений (фото, документы), объединив PhotoAttachment и DocumentAttachment.

☑ Создать дочернюю таблицу 

RequestPhotoAttachmentItem для привязки фото к заявкам.

☐ Реализация бизнес-логики:

☑ Внедрить хук 

before_save в ServiceReport для автоматического расчета итоговой стоимости работ.

☑ Добавить валидацию, запрещающую закрытие 

ServiceRequest без привязанного ServiceReport.

☑ Автоматизировать обновление статуса 

ServiceRequest на "Выполнена" при подтверждении (submit) отчета ServiceReport.

☑ Настроить интеграцию с Google Drive для централизованного хранения всех файлов и вложений.

☑ Реализовать хук 

on_trash для CustomAttachment для удаления файла из Google Drive при удалении записи в ERPNext.


☐ Разработка UI и интеграций:

☑ Создать удобную форму для 

ServiceReport в ERPNext с возможностью быстрого создания из заявки.


☑ Разработать профессиональный печатный формат (PDF) для 

ServiceReport.


☑ Реализовать загрузку фотографий к заявкам через веб-интерфейс и Telegram-бот (

/upload_photo).



☑ Расширить функционал Telegram-бота командами для инженеров: просмотр своих заявок (

/my_requests) и смена статуса (/set_status).


Этап 3: Финансы – Счета и платежи 

☐ Создание финансовой сущности:

☑ Разработать модель 

Invoice (Счет) в кастомном приложении для учета счетов клиентам и счетов от подрядчиков.


☑ Включить в модель все необходимые поля: проект, период, сумма, контрагент, статус, вложения .

☐ Реализация бизнес-логики и интеграций:

☑ Настроить интеграцию с Google Sheets: при создании счета от подрядчика автоматически добавлять строку в таблицу для контроля оплат.


☑ Реализовать отправку уведомлений администратору/бухгалтеру при создании новых счетов.


☑ Разработать логику смены статусов счетов ("Новый", "Ожидает оплаты", "Оплачен").

☐ Разработка UI:

☑ Создать форму для ввода счетов.

☑ Создать интерфейс для просмотра и управления всеми счетами с возможностью фильтрации и изменения статуса.

☑ Ограничить доступ к финансовой информации для роли "Клиент".


Этап 4: Бухгалтерский учет и налоги 

☐ Разработка отчётности:

☑ Обеспечить сбор всех необходимых данных для налоговой отчетности (например, учет НДС).


☑ Создать сводные аналитические отчеты для главного бухгалтера (например, "Прибыль/убыток по проекту").

☑ Обеспечить легкий доступ ко всем финансовым документам для аудита.

Этап 5: Кадры и расчет заработной платы 

☐ Настройка HR-сущностей:

☑ Создать кастомный DocType 

PayrollEntryCustom (Расчет зарплаты).


☑ Настроить использование стандартных DocTypes 

Employee и Attendance (Сотрудник и Посещаемость).

☐ Реализация бизнес-логики и UI:

☑ Реализовать хук в 

PayrollEntryCustom для автоматического расчета итоговой суммы к выплате (оклад минус аванс).


☑ Создать форму для бухгалтера для проведения расчета зарплаты по сотрудникам.

☑ Создать отчет "Суммарные расходы на зарплату по месяцам".

☑ Установить строгие права доступа к данным о зарплате только для ролей "Бухгалтер" и "Администратор".

☐ Аналитика и завершение:

☑ Реализовать систему аналитических отчетов по запросу через Telegram-бот для руководства с кэшированием результатов.



☑ Провести финальное тестирование всех модулей и пользовательское обучение.

*   Это задание требует ручного тестирования и взаимодействия с пользователями.
