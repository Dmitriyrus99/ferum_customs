--- a/ferum_customs/ferum_customs/doctype/service_request/service_request.py
+++ b/ferum_customs/ferum_customs/doctype/service_request/service_request.py
@@ -5,7 +5,7 @@
 
 from __future__ import annotations
 
-from typing import TYPE_CHECKING
+from typing import TYPE_CHECKING, Optional
 
 import frappe
 from frappe import _
@@ -29,15 +29,15 @@
     # Аннотации типов для полей DocType
     subject: DF.Data
     status: DF.Data
-    custom_customer: DF.Link | None
-    custom_service_object_link: DF.Link | None
-    custom_project: DF.Link | None
+    custom_customer: Optional[DF.Link]
+    custom_service_object_link: Optional[DF.Link]
+    custom_project: Optional[DF.Link]
     request_datetime: DF.Datetime
-    completed_on: DF.Datetime | None
-    planned_start_datetime: DF.Datetime | None
-    planned_end_datetime: DF.Datetime | None
-    actual_start_datetime: DF.Datetime | None
-    actual_end_datetime: DF.Datetime | None
+    completed_on: Optional[DF.Datetime]
+    planned_start_datetime: Optional[DF.Datetime]
+    planned_end_datetime: Optional[DF.Datetime]
+    actual_start_datetime: Optional[DF.Datetime]
+    actual_end_datetime: Optional[DF.Datetime]
     duration_hours: DF.Float
 
     def validate(self) -> None:
@@ -57,7 +57,7 @@
     def on_submit(self) -> None:
         """Действия при отправке документа."""
         if not self.actual_start_datetime:
-            self.db_set("actual_start_datetime", frappe.utils.now_datetime())
+            self.db_set("actual_start_datetime", now())
 
     def _clean_fields(self) -> None:
         """Очистка и нормализация полей."""
@@ -165,4 +165,4 @@
                     _("Недопустимый переход статуса: {0} → {1}").format(
                         previous.status, self.status
                     )
-                )
+                )
