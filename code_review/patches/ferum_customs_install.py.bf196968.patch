--- a/ferum_customs/install.py
+++ b/ferum_customs/install.py
@@ -23,7 +23,10 @@
     """
     Вызывается один раз после успешной установки приложения.
     """
-    frappe.db.commit()  # Коммит предыдущих транзакций перед началом операций в after_install, если необходимо
+    # Убедитесь, что транзакции завершены перед началом операций в after_install
+    if frappe.db.transaction_writes:
+        frappe.db.commit()  # Коммит предыдущих транзакций, если необходимо
+
     # Создание ролей выполняется через фикстуры (fixtures/role.json).
     # Дополнительная логика установки может быть добавлена при необходимости.
 
@@ -67,4 +70,4 @@
 #             "doctype": "ServiceType",
 #             "service_type_name": "Standard Maintenance",
 #             "default_duration_hours": 2
-#         }).insert()
+#         }).insert()
