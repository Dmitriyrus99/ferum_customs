--- a/scripts/setup_db.sh
+++ b/scripts/setup_db.sh
@@ -7,6 +7,7 @@
 #   SITE_NAME         - name of the Frappe site (subfolder in sites/)
 #   DB_ROOT_PASSWORD  - root password for MySQL
 
+# Check for required environment variables
 if [[ -z "${SITE_NAME:-}" ]]; then
   echo "Error: SITE_NAME variable is not set" >&2
   exit 1
@@ -22,8 +23,9 @@
   exit 1
 fi
 
-DB_NAME=$(jq -r '.db_name' "$SITE_CONFIG")
-DB_PASS=$(jq -r '.db_password' "$SITE_CONFIG")
+# Extract database name and password from site_config.json
+DB_NAME=$(jq -r '.db_name' "$SITE_CONFIG" || { echo "Error: Failed to parse db_name from site_config.json" >&2; exit 1; })
+DB_PASS=$(jq -r '.db_password' "$SITE_CONFIG" || { echo "Error: Failed to parse db_password from site_config.json" >&2; exit 1; })
 
 # Validate that db_name and db_password are not empty
 if [[ -z "$DB_NAME" || -z "$DB_PASS" ]]; then
@@ -31,6 +33,7 @@
   exit 1
 fi
 
+# Create database and user if they do not exist
 echo "Creating database and user if they do not exist..."
 mysql -uroot -p"$DB_ROOT_PASSWORD" <<SQL
 CREATE DATABASE IF NOT EXISTS \`${DB_NAME//\'/\'\\\'\' }\`;
@@ -39,4 +42,4 @@
 FLUSH PRIVILEGES;
 SQL
 
-echo "✔ Database and user are ready: $DB_NAME"
+echo "✔ Database and user are ready: $DB_NAME"
