1,2c1,2
< # ferum_customs/ferum_customs/custom_logic/service_object_hooks.py
< """Хуки для DocType *Service Object* – оборудование / объект обслуживания."""
---
> """Hooks for DocType *Service Object* – equipment / service object."""
> 
4c4
< from frappe import _  # Для перевода строк
---
> from frappe import _  # For string translation
6c6
<     # Замените на актуальный путь к вашему DocType Service Object, если он определен.
---
>     # Replace with the actual path to your Service Object DocType if defined.
8c8
< # from frappe.model.document import Document # Общий тип для документов
---
> # from frappe.model.document import Document # General type for documents
10c10
< def validate(doc: ServiceObject, method: str | None = None) -> None:
---
> def validate(doc: ServiceObject, method: str = None) -> None:
12c12
<     Проверяет уникальность серийного номера объекта обслуживания.
---
>     Checks the uniqueness of the service object's serial number.
14c14
<         doc: Экземпляр документа Service Object.
---
>         doc: Instance of the Service Object document.
16c16
<         method: Имя вызвавшего метода (например, "validate").
---
>         method: Name of the calling method (e.g., "validate").
18c18
<         frappe.ValidationError: Если серийный номер не уникален.
---
>         frappe.ValidationError: If the serial number is not unique.
20c20
<         # Удаляем возможные пробелы по краям перед проверкой
---
>         # Remove possible whitespace from the edges before checking
22c22
<         # Если после очистки строка пустая
---
>         # If the string is empty after cleaning
24c24
<             # Можно решить, считать ли это ошибкой или просто проигнорировать
---
>             # You can decide whether to consider this an error or just ignore it
26c26
<         # Формируем фильтры для поиска дубликатов.
---
>         # Create filters for duplicate search.
28c28
<         # Это гарантирует, что мы не найдем сам текущий документ при его редактировании.
---
>         # This ensures that we do not find the current document when editing it.
30c30
<         # Можно добавить фильтр по компании, если серийные номера уникальны в рамках компании
---
>         # You can add a filter by company if serial numbers are unique within the company
32c32
<         # frappe.db.exists возвращает имя существующего документа или None
---
>         # frappe.db.exists returns the name of the existing document or None
34c34
<             # Если дубликат найден, выбрасываем исключение с переводимым сообщением.
---
>             # If a duplicate is found, raise an exception with a translatable message.
36c36
<             ).format(serial_no_cleaned, existing_doc_name)
---
>             ).format(serial_no_cleaned, existing_doc_name)  # Format the error message
38c38
<     # Сюда можно добавить другие проверки для ServiceObject.
---
>     # Additional checks for ServiceObject can be added here.