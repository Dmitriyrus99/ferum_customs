--- a/.codex/tasks/fix-frappe-db.yaml
+++ b/.codex/tasks/fix-frappe-db.yaml
@@ -21,12 +21,12 @@
         echo "site_config.json для $SITE_NAME не найден. Предполагаем имя БД по умолчанию."
         export DB_NAME=$(echo "$SITE_NAME" | sed 's/\./_/g')
         # При отсутствии site_config.json используем ADMIN_PASSWORD в качестве DB_PASSWORD.
-        export DB_PASSWORD="${ADMIN_PASSWORD}"
+        export DB_PASSWORD="${ADMIN_PASSWORD:-default_password}"
       fi
 
       # Передаём переменные окружения для последующих шагов
-      echo "::set-env name=DB_NAME::$DB_NAME"
-      echo "::set-env name=DB_PASSWORD::$DB_PASSWORD"
+      echo "DB_NAME=$DB_NAME" >> $GITHUB_ENV
+      echo "DB_PASSWORD=$DB_PASSWORD" >> $GITHUB_ENV
       echo "Используемое имя БД: $DB_NAME"
 
   - name: Подключение к MariaDB и создание базы и пользователя (если не существует)
@@ -51,4 +51,4 @@
       docker compose exec frappe bash -c \
         "bench --site $SITE_NAME set-admin-password '$ADMIN_PASSWORD'"
     env:
-      ADMIN_PASSWORD: ${ADMIN_PASSWORD}
+      ADMIN_PASSWORD: ${ADMIN_PASSWORD}